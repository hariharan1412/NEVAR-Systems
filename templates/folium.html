{% extends 'base.html' %}


{% block body %}

    <iframe src="{{url_for('map')}}" width></iframe>

{% endblock %}
<!-- 
var lay = JSON.parse('{{ lay | safe }}')
var workspace = JSON.parse('{{ workspace | safe}}')
var ngrok_ip = JSON.parse('{{ ngrok_ip | safe}}')



var layer_names = [];

for(let i = 0; i < lay.length ; i++){
            
    current = window[lay[i]]

    console.log("VECTOR")

    // url: 'http://127.0.0.1:8080/geoserver/' + workspace  + '/wms',
        current = new ol.layer.Tile({

            title: lay[i],
            source: new ol.source.TileWMS({
            url: ngrok_ip + '/geoserver/' + workspace  + '/wms',
            params: {'LAYERS': workspace + ':' + lay[i], 'TILED': 'true'},
            serverType: 'geoserver',
            visible: true
        })
        
    });
    

    console.log(lay[i]) 
    console.log(workspace + ':' + lay[i])
    console.log(ngrok_ip + '/geoserver/' + workspace  + '/wms') 

    console.log('\n')

    layer_names.push(current)

    map.addLayer(current);        
    
    
}








function toggleLayer(eve){

    var lyername = eve.target.value;
    var checkedStatus = eve.target.checked;
    var lyrList = map.getLayers();
    // var lyrList = layer_names;

    console.log(lyername , checkedStatus , lyrList);


    lyrList.forEach(function(element) {
        
        console.log(element.get('title'));
        if(lyername == element.get('title')){

            console.log(element.get('title'));

            element.setVisible(checkedStatus);
        }
        
    });

}


<!-- 
<div class="grid-container">

    <div class="header">
        <img src="/static/resources/images/ad.png" style="width: inherit; vertical-align: middle;height: 75px;">
        <span style="vertical-align: middle;"> Nevar Systems </span>
    </div>

    <div class="left">
        <div class="toc">

            <h3>layers</h3>

            <input type="checkbox" id="osm" value="Open Street Map" checked onchange="toggleLayer(event)">
            <label for="osm"> Open Street Map </label>
            <br>

            
            <input type="checkbox" id="admin2" value="admin2" checked onchange="toggleLayer(event)">
            <label for="osm"> admin2</label>
            <br>

            
            <input type="checkbox" id="2011_dist" value="2011_dist" checked onchange="toggleLayer(event)">
            <label for="osm"> 2011_dist </label>
            <br>

        </div>
    </div>

    <div class="right">
        <div id="map" style="width: 100%; height: 100vh;"></div>

        <div id="popup" class="ol-popup">
            <a href="#" id="popup-closer" class="ol-popup-closer"></a>
            <div id="popup-content"></div>
        </div>
        
    </div>

</div> --> -->